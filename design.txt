
---架构设计:
最开始的设计是有问题的,数据接受模块和交易模块和其他的模块，比如策略，订单管理，ui等是对等的
只不过数据和交易主要是pub，同时也接受 命令

但是考虑到不同的模块的处理速度和延迟不一样，这么做可能不合适

data     trader
 |          |
 |          |
 pub        pub
 |          |
 ----xpub---
 zmq_proxy
 ----xsub----
 |          |
 |          |
 sub        sub


 ---------------
 应该给data和和trader单独开4个通道
 2个pub和两个sub，或者req/..
 然后在reactor中集中的pub


 data     trader
 |          |
 |          |
 pub        pub
 |          |
 ----reactor---
        |
        pub------------------------上面的模式还是需要的，只是变成了架构的子模式
        |
        xsub/xpub
        |
    --------
 |          |
 |          |
 sub        sub
---
这种架构可以保证自己控制数据和交易的实时性，保证交易和数据的前提下再满足外部模块的订阅需求






--------
整个系统如果都是通过消息来驱动,就可以轻松的解耦

可以方便把数据暴露给新增模块的同时,我们自己整个系统的实现也可以通过这个机制来做
比如订单管理如果继续消息管理而不是回调的方式,依赖关系的解决就可以简单很多
不需要复杂的代码级别的设计

zmq的安装 
apt-get install libzmq3-dev



git clone git://github.com/zeromq/libzmq.git 
cd libzmq
./autogen.sh
./configure -with-libsodium && make 
sudo make install 
sudo ldconfig
cd ../



git clone https://github.com/zeromq/zmqpp.git
mkdir build
cd build 
cmake ..
make 
sudo make install

----
# 安装必备的包
$ sudo apt-get install libtool pkg-config build-essential autoconf automake
$ git clone https://github.com/zeromq/libzmq.git
$ mkdir build
$ cd build
$ cmake ..
$ sudo make -j4 install

# 安装libzmq的C++绑定

https://github.com/zeromq/zmqpp.git
#//$ git clone git@github.com:zeromq/cppzmq.git
$ mkdir build
$ cd build
$ cmake ..
$ sudo make -j4 install

1）基线校准的目录：

目前会对如下目录进行基线校准：当这些目录有任何#增删改#的动作的时候，
重启机器后会进行检查和重新覆盖。

linux:

/home/surgerii/apps
/home/surgerii/trolley
/home/surgerii/calibration

qnx:
/nfs/apps

2）需要临时修改目录内容如何办（比如调试）
为了避免新修改被覆盖，需要手工重新构建基线
linux:
~/apps/scripts/integrity.sh linux g

qnx:
ksh /nfs/apps/scripts/integrity.sh qnx g

3) 手工基线校准
linux：
~/apps/scripts/integrity.sh linux c
ksh /nfs/apps/scripts/integrity.sh qnx c

